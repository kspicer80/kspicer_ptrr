<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>How I Made This Thing</title>
    <link rel="stylesheet" href="../tufte-css/tufte_css_tweaked.css">
  </head>
  <body>
<h1 id="workflow-for-how-i-made-my-post-tenure-review-reflection">Workflow for How I Made My Post-Tenure Review Reflection</h1>
<h2 id="step-0-preliminary-thoughts">Step 0: Preliminary Thoughts</h2>
<p>As I mention in <a href="ptrr.html#learning-to-code">Section 2.2</a> of my Reflection, given that we academics are largely interested in the content of our work, of our thinking, any little bit of effort that helps us focus in on that is to be greatly prioritized. Why spend a great deal of time doing things that the computer/software can automate for us?</p>
<h2 id="step-1-writing-everything-in-markdown">Step 1: Writing Everything in Markdown</h2>
<p>There is something about writing in Markdown that is so simple and effortless (no doubt that's by design). The goal of this format being that it can be used, as the main <a href="https://www.markdownguide.org/">Markdown page</a> makes clear, “to format virtually any document,” seems to be tailor-made for academics, especially those of who don’t often work with images or figures or graphs or plots. The goal of our work is the text, the text itself, not the flashy figures or supporting graphs, just the text, so a format where one can focus as much as possible on the actual content of the document seems to be an absolute necessity. Of course, it’s a wonderful benefit that something as simple as Markdown can be easily converted (<a href="https://pandoc.org">pandoc</a> is the conversion tool of choice, of course) to pretty much any other format or file type you want is an added benefit as well.</p>
<p>As some might know, it can be difficult to take things originally written in Microsoft Word and other programs and easily get those texts to live on the web—Markdown makes it a breeze. Wanting to hyperlink something in a Word document can itself be time-consuming: selecting the text where the hyperlink will appear, CTRL+K (or “Apple”+K for those on Macs), pasting the link, etc. Markdown makes it so easy, just wrap the text in [] and then follow it with a parenthesis that contains the actual hyperlink: [Here's a link](link address goes here). Very simple. Of course, for those academics that love the footnote, that's easy too: just stick the footnote in brackets with a caret: [^1] and then, anywhere else in the same document, adding “[^1]: Here’s the text of your footnote,” will get exactly what one wants. Again, very simple—and very easy once one gets the hang of it. So much else is easy to achieve: hyperlinks are, again, simply placed with square brackets with the URL in parenthesis right after it.</p>
<h2 id="step-2-thinking-about-styling-the-document">Step 2: Thinking about Styling the Document</h2>
<p>Once one has all the content down and written, one can move on to thinking about what they would like the content to look like, ultimately (i.e. how does one want to “style” the content itself). I have for quite a while now—ever since starting down the “DH” path of my career—been quite taken with Edward Tufte’s heavy use of “sidenotes” rather than “footnotes” or “endnotes.”<label for="sn-1" class="margin-toggle sidenote-number"></label><input type="checkbox" id="sn-1" class="margin-toggle"/><span id="1" class="sidenote">Here, of course, we mean his fantastic book, <em>The Visual Display of Quantitative Information</em>, 2nd Ed. (Cheshire, CT: Graphics Press, 2001).</span> I really quite like the <a href="https://edwardtufte.github.io/tufte-css/">CSS</a> created by Dave Leipmann to reproduce (in .html) the kinds of layout and styling of Tufte’s books.</p>
<p>Since the original Markdown file I created heavily utilized footnotes, one of the major things to do was going to be the conversion of those footnotes into a structure where those footnotes could become “sidenotes” and then get those properly styled by the CSS. The <a href="https://edwardtufte.github.io/tufte-css/">“documentation”</a> for the Tufte CSS requires—in order to get the sidenotes working correctly—some HTML code that I would need to convert my footnotes into … for each “sidenote” in the text, it would have to be wrapped in the following <code>class</code>:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;label</span><span class="ot"> for=</span><span class="st">&quot;sn-demo&quot;</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="ot">       class=</span><span class="st">&quot;margin-toggle sidenote-number&quot;</span><span class="kw">&gt;</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/label&gt;</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;input</span><span class="ot"> type=</span><span class="st">&quot;checkbox&quot;</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="ot">       id=</span><span class="st">&quot;sn-demo&quot;</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="ot">       class=</span><span class="st">&quot;margin-toggle&quot;</span><span class="kw">/&gt;</span></span></code></pre></div>
<p>where the <code>label for=</code> and <code>input id=</code> get changed to something descriptive for each sidenote. Thus, mine ended up looking like the following, for each sidenote (I should note that all of the above should be wrapped within a <code>span</code> class too so that the text going into the sidenote appears right after the creation of the note, like so):</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;label</span><span class="ot"> for=</span><span class="st">&quot;sn-1&quot;</span> </span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="ot">        class=</span><span class="st">&quot;margin-toggle sidenote-number&quot;</span><span class="kw">&gt;</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;/label&gt;</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="kw">&lt;input</span><span class="ot"> type=</span><span class="st">&quot;checkbox&quot;</span> </span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="ot">        id=</span><span class="st">&quot;sn-1&quot;</span> </span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="ot">        class=</span><span class="st">&quot;margin-toggle&quot;</span><span class="kw">/&gt;</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>        <span class="kw">&lt;span</span><span class="ot"> id=</span><span class="st">&quot;sn-1&quot;</span><span class="ot"> class=</span><span class="st">&quot;sidenote&quot;</span><span class="kw">&gt;</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>            &quot;Here is where we will put the text we want to go </span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>            into the sidenote itself.&quot;</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>        <span class="kw">&lt;/span&gt;</span></span></code></pre></div>
<p>The CSS handles all the “footnote-like” numbering, so all that is required are unique descriptions in the aforementioned <code>label for=</code> and <code>input id=</code> spots.</p>
<h2 id="step-3-converting-footnotes-into-tufte-sidenotes">Step 3: Converting Footnotes into Tufte “Sidenotes”</h2>
<p>So now that we know what the CSS wants the data for each sidenote to look like, one can start getting their Markdown content with footnotes into the format that the CSS wants. The final Markdown version had footnotes following the Markdown syntax. They looked as follows:</p>
<figure>
<img src="../ptrr_materials/1_supporting_materials/c_images/initial_markdown_fns.png" alt="original_markdown_with_footnotes" /><figcaption aria-hidden="true">original_markdown_with_footnotes</figcaption>
</figure>
<p>Now, in creating the document originally, I hadn’t yet decided on the Tufte CSS (which, in hindsight, might have been better if I had settled on it sooner and thus could have saved the task of converting the footnotes intto sidenotes)—, so one way to handle this would be to simply go and copy-paste all the text within each footnote into the sidenote format mentioned above. This is one way to do it, but it’s far from efficient. I had over one-hundred footnotes and doing that manually would have been quite mad. Obviously, what would be nice is if we could write some code to search through the Markdown document, find all the footnotes (and footnote numbers) and replace them with html syntax needed for the CSS to work properly. Easy enough.</p>
<p>This is a pretty simple task for the machine, all that’s needed is python’s <code>re</code> <a href="https://docs.python.org/3/library/re.html">library</a>. We start with our usual procedures, importing our library and getting our file read in appropriately:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>markdown_file_path <span class="op">=</span> <span class="st">&#39;/path/to/our/markdown/file&#39;</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(markdown_file_path, <span class="st">&#39;r&#39;</span>) <span class="im">as</span> f:</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    markdown_text <span class="op">=</span> f.read()</span></code></pre></div>
<p>Now, with that done, we can compile some <a href="https://en.wikipedia.org/wiki/Regular_expression">regular expressions</a> (regex). We’ll need to search for a couple of things, first, the footnote itself that occurs in the main body of the text, this, again, looks like: [^1]; second, we need to jump down and grab all of the text that, in the screenshot above, looks like [^1]:  where the footnote text comes immediately after the non-breaking space character (&amp;nbsp;). So, we write some “regex” to find our footnote numbers and then our footnote text:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>footnote_pattern <span class="op">=</span> <span class="vs">r&quot;\[\^(\d+)\]&quot;</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>footnote_matches <span class="op">=</span> re.findall(footnote_pattern, markdown_text)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>footnote_string <span class="op">=</span> <span class="st">&quot;, &quot;</span>.join(</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>                  [<span class="st">&quot;[^&quot;</span> <span class="op">+</span> match <span class="op">+</span> <span class="st">&quot;]&quot;</span> <span class="cf">for</span> match <span class="kw">in</span> footnote_matches])</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>footnote_text_pattern <span class="op">=</span> <span class="vs">r&quot;\[\^(\d+)\]:\s*(.*?);[\n\s]*&amp;nbsp;\s*(.*?)\n&quot;</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>footnotes <span class="op">=</span> re.findall(<span class="vs">r&#39;\[\^(\d+)\]:&amp;nbsp;(.*?)(?=\n\[|$)&#39;</span>, </span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>                        markdown_text, re.DOTALL)</span></code></pre></div>
<p>Regex expressions so often look to us human readers as pure <a href="https://medium.com/factory-mind/regex-tutorial-a-simple-cheatsheet-by-examples-649dc1c3f285">gobbledy-gook</a> (and, of course, there are tons of <a href="https://github.com/mikaelho/python-human-regex">packages</a> designed to make these things more “readable” by us humans). What on earth is something like <code>r"\[\^(\d+)\]"</code> doing? I’ll spare everyone the complications, but, most simply put, the regex above is going to search for anything that fits the pattern: [^some number] and keep track of it; the second long regex (<code>r"\[\^(\d+)\]:\s*(.*?);[\n\s]*&amp;nbsp;\s*(.*?)\n"</code>) is looking for anything of the form: [^some number]:&amp;nbsp;.</p>
<p>Once our scripts match all of these patterns, we want a nice way to store it so that we know what text goes with what footnote/number. A simple <a href="https://docs.python.org/3/tutorial/datastructures.html#dictionaries">Python dictionary</a> is just what we need, where the keys will look something like this “[^1]” and the values will be the actual text tied to that footnote. We create the “footnote dictionary” thusly:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>fn_dictionary <span class="op">=</span> {}</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> footnote <span class="kw">in</span> footnotes:</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    number <span class="op">=</span> footnote[<span class="dv">0</span>]</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    number_string <span class="op">=</span> <span class="ss">f&#39;[^</span><span class="sc">{</span>number<span class="sc">}</span><span class="ss">]&#39;</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    text <span class="op">=</span> footnote[<span class="dv">1</span>].strip()</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    fn_dictionary[number_string] <span class="op">=</span> text</span></code></pre></div>
<p>This gives us exactly what we need. Now that we have this, we can create another variable that will store our html syntax (the code we’ll want to ultimately replace with in our Markdown file):</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>html_template <span class="op">=</span> <span class="st">&#39;&#39;&#39;&lt;label for=&quot;sn-</span><span class="sc">{num}</span><span class="st">&quot; </span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="st">                    class=&quot;margin-toggle sidenote-number&quot;&gt;</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="st">                &lt;/label&gt;</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="st">                &lt;input type=&quot;checkbox&quot; </span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="st">                id=&quot;sn-</span><span class="sc">{num}</span><span class="st">&quot; </span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="st">                class=&quot;margin-toggle&quot;/&gt;</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="st">                &lt;span class=&quot;sidenote&quot; id=&quot;</span><span class="sc">{num}</span><span class="st">&quot;&gt;</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="st">                    </span><span class="sc">{text}</span><span class="st">&lt;/span&gt;&#39;&#39;&#39;</span></span></code></pre></div>
<p>This should look familiar, as it’s the same code that the CSS needs to properly style the sidenotes. We also have placeholders here <code>{num}</code> and <code>{text}</code>, which is what will be replaced with the keys and values of our “footnote dictionary” respectively.</p>
<p>Next we’ll iterate over all the keys and values of our dictionary and use those to make the replacements within the original Markdown file (in earlier iterations of this the regex would throw errors if there were some characters in the pattern that we’re properly “escaped,” so the last two lines are meant to handle that and show us the spots where the error might have occurred):</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> key, value <span class="kw">in</span> fn_dictionary.items():</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    html <span class="op">=</span> html_template.<span class="bu">format</span>(num<span class="op">=</span>key[<span class="dv">2</span>:<span class="op">-</span><span class="dv">1</span>], text<span class="op">=</span>value)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>        markdown_text <span class="op">=</span> re.sub(re.escape(key), html, markdown_text)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">except</span> re.error <span class="im">as</span> e:</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>        <span class="bu">print</span>(<span class="ss">f&quot;Error: </span><span class="sc">{e}</span><span class="ss">, Key: </span><span class="sc">{</span>key<span class="sc">}</span><span class="ss">, Value: </span><span class="sc">{</span>value<span class="sc">}</span><span class="ss">&quot;</span>)</span></code></pre></div>
<p>This code will move through the text of the Markdown file, find the patterns and replace (or substitute, in the <code>re.sub()</code> function call) those matched patterns with the <code>html_template</code> above (along with the text for each footnote), thus resulting in a nice replacement of the Markdown syntax for footnotes with the required html syntax needed to get those footnotes into the “sidenote” format. Then we can just output the new file with all the replacements like so:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">&#39;/Users/spicy.kev/Desktop/streamlined_version.md&#39;</span>, <span class="st">&#39;w&#39;</span>) <span class="im">as</span> outfile:</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    outfile.write(markdown_text)</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">&quot;Successfully converted all your footnotes to sidenotes!&quot;</span>)</span></code></pre></div>
<p>With this out of the way, a simple trip to the command line so that we can have pandoc convert the .md to .html, all with the proper html syntax for the sidenotes:</p>
<figure>
<img src="../ptrr_materials/1_supporting_materials/c_images/pandoc_conversion.png" alt="pandoc_cli_command_for_conversion" /><figcaption aria-hidden="true">pandoc_cli_command_for_conversion</figcaption>
</figure>
<p>After conversion, we get something that looks like this, where one can see the proper html code for the sidenotes:</p>
<figure>
<img src="../ptrr_materials/1_supporting_materials/c_images/finished_html.png" alt="finished_html" /><figcaption aria-hidden="true">finished_html</figcaption>
</figure>
<h2 id="step-4-css-styling-tweaks">Step 4: CSS Styling Tweaks</h2>
<p>Earlier above I made an off-handed remark about the possibility that knowing how one wants their Markdown ultimately to be “styled” could have saved a bit of work. I think there is much to say about this issue of what those in DH might call “proper text markup and encoding” (I have spoken quite a bit about this in some of my blog posts, <a href="https://kspicer80.github.io/posts/2022-04-20-tei-encoding-with-henry-james_11/">for example</a>). It seems clear to me that if one doesn’t quite know what they want to have the thing look like at the end of the day, we have this intuitive feeling that it would best in this case to be “flexible,” in some sense—to create the content in a way that will make it easier for one to turn it into all kinds of different things later on down the workflow. Curiously (and, again, following our quite natural “intuition”), one might think that the desire to be “flexible” might mean to do as little as possible, to keep the data relatively unstructured so that it is “easier” (somehow) to give that unstructured data far more sophisticated structure later. This actually seems to the opposite of the best path to take; instead, what makes things flexible is creating the content in a way that is highly structured (highly “encoded”) such that it’s easier to find and transform what it is one wants, simply by the fact that if things are explicitly encoded, it’s easier to find them and then transform them. Thus, there is an irony here: flexibility comes from <em>more</em> structure, <em>more</em> encoding, not less. What exactly do I mean?</p>
<p>Let’s see if I can make this clear using the html of the Markdown file we now have, along with the Tufte CSS to style it. We know that every sidenote lives within the “sidenote” class. One of the fantastic things about CSS is that it makes it incredibly easy to make one tiny little change in the <code>.css</code> file and have that tiny change “cascade” (thus the moniker of <a href="https://en.wikipedia.org/wiki/CSS">“<em>cascading</em> style sheets”</a>) through all the instances of that <code>sidenote class</code> present within a file that is encoded using that class. Thus, just a few lines of code in the stylesheet can immediately alter a ton of other things within the document:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode css"><code class="sourceCode css"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">.sidenote</span><span class="op">,</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">.marginnote</span> {</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">float</span>: <span class="dv">right</span><span class="op">;</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">clear</span>: <span class="dv">right</span><span class="op">;</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">margin-right</span>: <span class="dv">-30</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">width</span>: <span class="dv">50</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">margin-top</span>: <span class="dv">0.3</span><span class="dt">rem</span><span class="op">;</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">margin-bottom</span>: <span class="dv">0</span><span class="op">;</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">font-size</span>: <span class="dv">1.1</span><span class="dt">rem</span><span class="op">;</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">line-height</span>: <span class="dv">1.3</span><span class="op">;</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">vertical-align</span>: <span class="dv">baseline</span><span class="op">;</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">position</span>: <span class="dv">relative</span><span class="op">;</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">max-width</span>: <span class="dv">300</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">word-wrap</span>: break-word<span class="op">;</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Changes here will cascade through the document, making it far better than trying to handle this on a particular or case-by-case basis. As a concrete example, in my Post-Tenure Review Reflection document, I often had footnotes that were appearing at the end of some text within the <code>&lt;blockquote&gt;</code> tag. Since block quotes are indented from the left-hand margin, the sidenote would be slightly off on the right-side given how the CSS creates the “sidenote” container that lives along the right margin. This is perhaps easy to see with an example: </p>
<figure>
<img src="../ptrr_materials/1_supporting_materials/c_images/original_block_quote_sn.png" alt="original_css_styling"/><figcaption aria-hidden="true">original_css_styling</figcaption></p>
</figure>
<p>
One can make the <a href="https://www.w3schools.com/cssref/css_selectors.php">“CSS selectors”</a> as precise as one might wish so as to select only very, very specific elements. Her below we’re picking out only the data that lives within elements given in a <code>blockquote</code> living within a paragraph tag (<code>&lt;p&gt;</code>) while also possessing the <code>.sidenote</code> class:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode css"><code class="sourceCode css"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>blockquote p <span class="fu">.sidenote</span><span class="op">,</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>blockquote p <span class="fu">.marginnote</span> {</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">margin-right</span>: <span class="dv">-35.25</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">text-align</span>: <span class="dv">left</span><span class="op">;</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">max-width</span>: <span class="dv">300</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">width</span>: <span class="dv">50</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">position</span>: <span class="dv">relative</span><span class="op">;</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">word-wrap</span>: break-word<span class="op">;</span></span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Simple tweaks to the CSS selector in the <code>.css</code> file thus make it a breeze to transform things to get the notes attached to block quote elements to “line-up” better with the sidenotes that weren’t appended to indented block quote paragraphs (it's possible that they are still a nanometer off in the official version, but it strikes me as "close enough"; again, if one wanted it to be perfect, the workflow here is nicely set up to be able to make those tiny improvements close to effortless.). One tiny change here and the effects are visible in all kinds of other places. Thus, getting the sidenotes appended to block quotes looks much better than they did originally without the slightly tweaked .css originally created by Liepmann:</p>
<figure>
<img src="../ptrr_materials/1_supporting_materials/c_images/sidnote_for_blockquotes.png" alt="sidnote_to_blockquote" /><figcaption aria-hidden="true">sidnote_to_blockquote</figcaption>
</figure>
<p>Okay, but what’s the lesson/takeaway here? Things are only “easy” here if one has tagged things properly ahead of time—thus, if the structure is there it’s easy to find it and style it. If it’s not, things already start to get onerous and time-consuming. The more specifically one structures the data, the easier things get (see <a href="https://kspicer80.github.io/posts/2023-01-13-canvas-live-api-work/">this blog post</a> for more on this issue/concern of working with structured/unstructured data vis-à-vis the Instructure API for Canvas) to change because the structure needed to find and specify things is already working. This, I think, is one of the reasons why working with .pdfs should become less and less prevalent: it’s hard to drill down and pinpoint specificities in within this document type.) Just imagine trying to finagle all the sidenotes that were attached to block quotes throughout a +60,000 word document. What a nightmare.</p>
<h2 id="step-5-finalizing-the-styling">Step 5: Finalizing the Styling</h2>
<p>Once everything is properly structured, tweaks to the styling make things so easy. Don’t like the font size? Just change the CSS selector rules for all the text living within a <code>&lt;p&gt;</code> contained by the <code>&lt;body&gt;</code> element (or whatever). (Again, just imagine having to select all 60,000 words in Microsoft Word and then going up to the “Font” box, clicking through, selecting the right font and size—ugh!—here now just a couple of keystrokes get all the changes cascading across the document as a whole). Don’t like where the Tufte CSS has the margin start along the left side? Again, a proper CSS selector to change the <code>margin-left</code> attribute of every <code>&lt;p&gt;</code> tag and away we go. Don’t like the way the CSS handles figures? Once more, slight changes to the CSS selectors is in order:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode css"><code class="sourceCode css"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>figure {</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">padding</span>: <span class="dv">0</span><span class="op">;</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">border</span>: <span class="dv">0</span><span class="op">;</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">font-size</span>: <span class="dv">100</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">font</span>: <span class="bu">inherit</span><span class="op">;</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">vertical-align</span>: <span class="dv">baseline</span><span class="op">;</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">max-width</span>: <span class="dv">55</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>    -webkit-margin-start: <span class="dv">0</span><span class="op">;</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>    -webkit-margin-end: <span class="dv">0</span><span class="op">;</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">margin</span>: <span class="dv">0</span> <span class="dv">0</span> <span class="dv">3</span><span class="dt">em</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Everything is easily controlled with all the data properly encoded, tagged, and structured. Font sizes, image sizes, everything is easy to change with only a couple keystrokes. (Imagine, one more time, having to individually select 20 images in Word and then dragging to resize each image—yeeesh, such a nightmare indeed. Every image should live within a <code>&lt;img&gt;</code> class, so just write the rule to select every time that class shows up …) What about the way the captions on the images/figures are handled:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode css"><code class="sourceCode css"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>figcaption {</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    <span class="kw">margin-top</span>: <span class="dv">0</span><span class="op">;</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">margin-bottom</span>: <span class="dv">0</span><span class="op">;</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">font-size</span>: <span class="dv">1.1</span><span class="dt">rem</span><span class="op">;</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">line-height</span>: <span class="dv">1.6</span><span class="op">;</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">vertical-align</span>: <span class="dv">baseline</span><span class="op">;</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">position</span>: <span class="dv">relative</span><span class="op">;</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">max-width</span>: <span class="dv">40</span><span class="dt">%</span><span class="op">;</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">text-align</span>: <span class="dv">center</span><span class="op">;</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">margin-left</span>: <span class="bu">auto</span><span class="op">;</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">margin-right</span>: <span class="bu">auto</span><span class="op">;</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>and what if one wanted to not have to click through—manually—every figure caption? Slight tweaks again are called for here. So, long story short: time put in up front at the start to have the data tagged/encoded very specifically saves all kinds of work down the road. It becomes very clear to me how powerful (and no doubt significant) the <a href="https://en.wikipedia.org/wiki/CSS#History">implementation of CSS</a> was when it occurred (still pretty early on in the WWW lifespan, I should say). It no doubt made so many things so much easier and so much more streamlined and far less time-consuming.</p>
</body>
</html>